---
trigger: always_on
---

# Context & Project History
Этот проект — плазмоид (виджет) для KDE Plasma, форк с длинной историей:
1.  **FancyTasks** (оригинал): написан для Plasma 5, заброшен 2+ года назад.
2.  **FancyTasksPlus** (форк): попытка адаптации под Plasma 6. Работает на 6.2, но не обновлялся 7 месяцев.
3.  **Current Project** (этот форк): адаптирован мной для **Plasma 6.5+**.

**Текущее состояние:**
- Проект полностью переведен на русский язык (локализация).
- В коде много легаси (старый код возрастом 9+ лет от предыдущих авторов).

# Technical Stack & Environment
- **Target Environment:** KDE Plasma 6.5 (и новее).
- **Frameworks:** Qt6, Kirigami, QML.
- **Tools:** Бинарники Qt6 инструментов (например, `qmllint`) находятся в `/usr/lib/qt6/bin/`.

# Coding Guidelines (Строго соблюдать)
1.  **Modernization:**
    - При написании или изменении кода ориентируйся **только** на стандарты Plasma 6.5 и новее, Qt6 и Kirigami.
    - Активно избавляйся от легаси-кода, если трогаешь соответствующие файлы. Заменяй устаревшие методы на современные аналоги Qt6/Plasma6.

2.  **Comments & Language:**
    - **CHAT LANGUAGE:** Со мной общайся только на **русском языке**. Отвечай максимально компактно, четко и по делу. Мне не нужны пространные рассужения.
    - **CODE COMMENTS:** В самом коде комментарии должны быть строго на **АНГЛИЙСКОМ**. Русские комментарии в коде запрещены.
    - **Comment Style:** Не оставляй комментарии, описывающие очевидное. Пиши комментарии только там, где логика сложная и это реально поможет будущим разработчикам понять "почему сделано именно так". Не нужно вставлять комментариев для очевидных вещей. Не нужно вставлять комментарии по каждому действию.
    - Сохраняй существующие английские комментарии авторов, но только если они всё еще актуальны.
    - **Git rules:** для работы с git используй mcp если это доступно
    - не нужно добавлять в коммиты или в gitignore следующие пути:
       - .agent/
       - .vscode/

# Task
Твоя задача — помогать мне развивать этот форк, поддерживать совместимость с последней Plasma и рефакторить старый код.